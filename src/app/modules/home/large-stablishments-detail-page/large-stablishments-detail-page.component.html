<app-header></app-header>

<div class="container mb-lg-5 main-container">
    <div class="row d-flex justify-content-center align-items-center">
        <div class="col m-5 me-0 ms-3 results-card">
            <div class="p-3 ms-8 border bg-light" >
                <h2 class=" ps-5 pt-4 fw-bold mb-3">Resultados</h2>
                <div class="data" *ngIf="true" id="pdfData">
                    <div class="d-flex flex-column mb-4" *ngFor = "let ls of LSData">
                        <h5 class="details">{{ls.name}}
                        </h5>
                        <ul class="result-container list-unstyled" *ngFor = "let address of ls.addresses ">
                            <!--*ngFor must be added!-->
                            <li *ngIf ="address.street_name" >{{address.street_name}}, {{address.number}}</li>
                            <li *ngIf = "address.town">{{address.zip_code}} {{address.town}}</li>
                            <li *ngIf = "ls.email">Email: {{ls.email}}</li>
                            <li *ngIf = "ls.web">Web: {{ls.web}}</li>
                            <li *ngIf = "ls.phone">Tel.:{{ls.phone}}</li>
                            <li></li>
                        </ul>
                    </div>
                </div>
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <button style="background: #2c5e8f;"
                            class="btn btn-lg me-md-2 mt-4 me-4 justify-content-center text-white fw-bolder rounded-0"
                            type="button"
                            (click)="open(saveSearch)">Guardar Resultados</button>
                    <button style="background: #5CB85C;"
                            class="btn btn-lg me-md-2 mt-4 me-4 justify-content-center text-white fw-bolder rounded-0"
                            type="button">Descargar Resultados
                    </button>
                </div>
            </div>
        </div>

        <div class="col m-5 mx-3">
            <div class="p-3 border bg-light text-center">
                <app-mapbox></app-mapbox>
            </div>
        </div>
    </div>
</div>

<!-- Save Search Modal -->
<ng-template #saveSearch let-modal>

    <div class="modal-body rounded-0 p-4">
        <h4 class="modal-title fw-bolder">Guardar búsqueda</h4>
        <hr class="mx-2">
        <form [formGroup]="saveSearchForm" (submit)="onSubmit()">
            <div class="mb-4">
                <label for="nombre" class="ps-3 fs-5">Nombre</label>
                <input type="text" 
                        name="nombre"
                        formControlName="nombre"
                        [class.is-invalid]="inputInvalid('nombre')"
                        class="form-control form-control-lg fw-bold mt-2 rounded-0">
                <p class="text-danger" *ngIf="inputInvalid('nombre')">Este campo no puede estar vacio</p>

            </div>
            <div class="mb-4">
                <label for="detalles" class="ps-3 fs-5">Detalles de la Búsqueda</label>
                <input type="text" 
                        name="detalles"
                        formControlName="detalles"
                        [class.is-invalid]="inputInvalid('detalles')"
                        class="form-control form-control-lg fw-bold mt-2 rounded-0">
                <p class="text-danger" *ngIf="inputInvalid('detalles')">Este campo no puede estar vacio</p>
            </div>
            <div class="d-flex justify-content-end gap-2">
                <button type="button" 
                        class="btn btn-lg justify-content-center text-white fw-bolder rounded-0"
                        style="background-color:firebrick;"
                        (click)="closeModal()">
                        Cancelar
                </button>
                <button type="submit" 
                        class="btn btn-lg text-white fw-bolder rounded-0"
                        style="background-color: #2c5e8f;">
                        Guardar
                </button>
            </div>
        </form>
    </div>

</ng-template>



<app-footer></app-footer>